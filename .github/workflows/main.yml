- name: Verify project structure
  run: |
    echo "=== Project Structure ==="
    ls -la
    echo "=== RF Access App Directory ==="
    ls -la rf-access-app/
    echo "=== Gradlew File Check ==="
    ls -la rf-access-app/gradlew
    echo "=== App Source Directory ==="
    ls -la rf-access-app/app/

- name: Fix gradlew permissions
  run: |
    cd rf-access-app
    chmod +x gradlew
    ls -la gradlew
    echo "Gradlew permissions fixed"

- name: Clean build with verification
  run: |
    cd rf-access-app
    pwd
    ./gradlew clean --no-daemon --refresh-dependencies --stacktrace --info

- name: Build APK with verification
  run: |
    cd rf-access-app
    ./gradlew assembleDebug --no-daemon --stacktrace --refresh-dependencies --info
